{% extends "batchsql/base.html" %}
{% block content %}
{% load batchsql_filters %}
<b>Here you define the database query</b>

<script type="text/javascript">
    var tables = "{{ tables|to_json }}";
</script>

<p>Database Schema</p>
<!--
<div class="row">
<ul>
    {% for tablename, columns in tables.items %}
        <div class="col-md-1">
            <li>{{ tablename }}</li>
            <ul>
                {% for column in columns %}
                <li>{{ column }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endfor %}
    </ul>
</div>
-->

<p>
<form class="form-horizontal" action="submit" method="post">
    <div class="row">
        {% csrf_token %}
        <div id="tablename-choice" class="col-md-4">
            <h3>Tablename</h3>
            <div class="controls">
                <select id="tablename" name="tablename" class="form-control">
                    {% for tablename in tables.keys %}
                    <option value="{{ tablename }}">{{ tablename }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div id="field-selection" class="col-md-4">
            <h3>Fields</h3>
            <select multiple size=10 id="fields" name="fields" class="form-control">
            </select>
        </div>
        <div class="col-md-4">
            <h3>Directions</h3>
            <p>
                Choose a table, then select multiple fields using shift+click or cmd+click.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <label for="email">Email Address</label>
            <input type="text" name="email" id="email" class="form-control" placeholder="Enter email" style="width: 500px">
        </div>
        <div class="form-group">
            <label for="dataformat-selector">Data Format</label>
            <div id="dataformat-selector" class="btn-group">
                <button type="button" class="btn btn-default" data-format="CSV">CSV (Comma-separated values)</button>
                <button type="button" class="btn btn-default" data-format="TSV">TSV (Tab-separated values)</button>
                <button type="button" class="btn btn-default" data-format="SQL">SQLite</button>
            </div>
        </div>
        <input id="dataformat" name="dataformat" type="hidden" value="CSV"></input>
    </div>
    <br />
    <input class="btn btn-primary" type="submit" value="Submit Job" />
</form>
</p>
{% endblock content %}
